
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>FlowCRM | –ì–ª–∞–≤–Ω–∞—è</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen font-sans">
  <div class="flex min-h-screen">

    <!-- Sidebar -->
<aside class="w-64 bg-gray-800 p-6 flex flex-col">
  <div>
    <a href="/" class="block text-2xl font-bold mb-6 hover:text-blue-400 transition">FlowCRM</a>
    <nav class="flex flex-col space-y-3 text-sm">
      <a href="/map" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-500 transition">–ö–∞—Ä—Ç–∞ –∫–ª—É–±–∞</a>
      <a href="/sales" class="hover:text-blue-400">üõí –ü—Ä–æ–¥–∞–∂–∏</a>
      <a href="/stats" class="hover:text-blue-400">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
      <a href="/users" class="hover:text-blue-400">üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</a>
    </nav>
  </div>
  <div class="mt-auto">
    <form action="/shutdown" method="post" onsubmit="return confirm('–í—ã–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä?')">
      <button type="submit" class="text-left text-red-500 hover:text-red-400 mt-6">‚õî –í—ã–∫–ª—é—á–∏—Ç—å</button>
    </form>
  </div>
</aside>

    <!-- Main content -->
    <main class="flex-1 p-8">
      <h2 class="text-3xl font-semibold mb-6">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ FlowCRM üëã</h2>

      <!-- –í–∏–¥–∂–µ—Ç—ã -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <div class="bg-gray-800 p-6 rounded-lg shadow hover:shadow-xl transition">
          <p class="text-sm text-gray-400 mb-1">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ü–ö</p>
          <h3 id="active-pcs" class="text-2xl font-bold text-green-400">...</h3>
        </div>
        <div class="bg-gray-800 p-6 rounded-lg shadow hover:shadow-xl transition">
          <p class="text-sm text-gray-400 mb-1">–ü—Ä–æ–¥–∞–∂ –∑–∞ —Å–µ–≥–æ–¥–Ω—è</p>
          <h3 id="sales-today" class="text-2xl font-bold text-yellow-300">...</h3>
        </div>
        <div class="bg-gray-800 p-6 rounded-lg shadow hover:shadow-xl transition">
          <p class="text-sm text-gray-400 mb-1">–í—ã—Ä—É—á–∫–∞</p>
          <h3 id="total-revenue" class="text-2xl font-bold text-blue-300">... ‚ÇΩ</h3>
        </div>
      </div>

      <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
      <div class="bg-gray-800 p-6 rounded-lg shadow">
        <h4 class="text-xl font-semibold mb-4">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h4>
        <div class="flex flex-wrap gap-4">
          <a href="/pcs" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-500 transition">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–ö</a>
          <a href="/sales" class="px-4 py-2 bg-green-600 rounded hover:bg-green-500 transition">–ü—Ä–æ–¥–∞–∂–∏</a>
          <a href="/stats" class="px-4 py-2 bg-purple-600 rounded hover:bg-purple-500 transition">–û—Ç—á—ë—Ç—ã</a>
        </div>
      </div>
    </main>
  </div>

  <script>
    async function loadStats() {
      try {
        const pcs = await fetch('/api/pcs').then(r => r.json());
        document.getElementById('active-pcs').textContent = pcs.filter(pc => pc.is_online).length;

        const stats = await fetch('/api/stats').then(r => r.json());
        document.getElementById('sales-today').textContent = stats.sales_today;
        document.getElementById('total-revenue').textContent = stats.total_revenue + ' ‚ÇΩ';
      } catch (err) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:", err);
      }
    }
    loadStats();
  </script>
</body>
</html>
